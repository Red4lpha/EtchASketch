<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <h1> 
    ETCH - A - SKETCH
  </h1>
  <button id="btnClear">Clear Grid</button>
  <div id="container"></div>
  <style>
    #container {
      display: grid;
      border-color: black;
      border-width: 5px;
    }
  </style>
  
  <script>
    const container = document.querySelector('#container');
    const btnClear = document.querySelector('#btnClear');
    let divs = [];
    let gridSize = 16;
    const height = 350;
    const width = 350;
    function addDivGrid(newSize){

      container.style.width = width +'px';
      container.style.height = height +'px';
      container.style.gridTemplateColumns = 'repeat(' + newSize + ', ' + width/newSize + 'px)';
      container.style.gridTemplateRows = 'repeat(' + newSize + ', auto)';
      for(i = 0; i < newSize*newSize; i++){ setGridDivInfo(i) }
      const grids = document.querySelectorAll('.grid');
      grids.forEach((grid) => {
        grid.addEventListener('mouseover', hover);
    });
    }
    function setGridDivInfo(i){
      divs[i] = document.createElement('div');
      divs[i].classList.add('grid');
      divs[i].setAttribute ('style', 
        'background: white;' +
        'border: 1px solid black;');
      //divs[i].textContent = i;
      container.appendChild(divs[i]);
     // console.log(divs[i]);
    }

    function removeAllChildren(){
      while (container.firstChild) {
        //console.log(container.firstChild);
        container.removeChild(container.firstChild);  
        }
    }

    addDivGrid(gridSize);
    //btnClear.onclick = () => addDivGrid(20);
    btnClear.addEventListener('click', () => {
        //console.log("btnClear clicked");
        let newSize = window.prompt("Enter a new value for the grid side(1-64):", "16");
        if (newSize < 1 || newSize > 64 || newSize === NaN) {alert("Error: Incorrect value");}
        else {
          removeAllChildren();
          divs = [];
          addDivGrid(newSize);
          }
        
      });
  
    function hover(e){
        //console.log(e.target);
        e.target.removeAttribute('background: white;');
        e.target.style.background = 'black';
    }  

  </script>

</body>
</html>